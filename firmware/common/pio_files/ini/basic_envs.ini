[env:basic]
extra_scripts = pre:$PROJECT_DIR/../common/pio_files/py/add_name_version.py
                post:$PROJECT_DIR/../common/pio_files/py/add_basic_compiler_flags_post.py
                post:$PROJECT_DIR/../common/pio_files/py/add_stm32_compiler_flags.py
                post:$PROJECT_DIR/../common/pio_files/py/add_hex_gen.py

build_flags = -DUSE_HAL_DRIVER
	        -DUSE_FULL_LL_DRIVER
            -Wl,-Map,"${platformio.workspace_dir}/linkermap.map"

debug_build_flags = -fstack-usage -ggdb3 -g3 -gdwarf-3 -Wl,-Map,"${platformio.workspace_dir}/linkermap.map"


[env:f4basic]
extends = env:basic

extra_scripts = ${env:basic.extra_scripts}
                pre:$PROJECT_DIR/../common/pio_files/py/add_f4_compiler_flags.py

build_flags = ${env:basic.build_flags}
            -mcpu=cortex-m4
            -DSTM32F4xx

[env:h7basic]
extends = env:basic

extra_scripts = ${env:basic.extra_scripts}
                pre:$PROJECT_DIR/../common/pio_files/py/add_h7_compiler_flags.py

build_flags = ${env:basic.build_flags}
            -mcpu=cortex-m7
            -DSTM32H7xx

[env:f407basic]
extends = env:f4basic

board = stm32f407
board_build.mcu = stm32f407vet6
board_build.f_cpu = 168000000L
board_build.ldscript = ${PROJECT_DIR}/../common/pio_files/ld/f407bl.ld

build_flags = ${env:f4basic.build_flags}
            -DSTM32F407xx

debug_svd_path = ${PROJECT_DIR}/../common/pio_files/svd/STM32F407.svd

[env:f407vebasic]
extends = env:f4basic

board = stm32f407ve
board_build.mcu = stm32f407vgt6
board_build.f_cpu = 168000000L
board_build.ldscript = ${PROJECT_DIR}/../common/pio_files/ld/f407vebl.ld

build_flags = ${env:f4basic.build_flags}
            -DSTM32F407xx

debug_svd_path = ${PROJECT_DIR}/../common/pio_files/svd/STM32F407.svd

[env:h725basic]
extends = env:h7basic

board = stm32h725
board_build.mcu = stm32h725
board_build.f_cpu = 550000000L
board_build.ldscript = ${PROJECT_DIR}/../common/pio_files/ld/h725bl.ld

build_flags = ${env:h7basic.build_flags}
            -DSTM32H725xx

debug_svd_path = ${PROJECT_DIR}/../common/pio_files/svd/STM32H725.svd

[env:h743basic]
extends = env:h7basic

board = stm32h743
board_build.mcu = stm32h743
board_build.f_cpu = 480000000L
board_build.ldscript = ${PROJECT_DIR}/../common/pio_files/ld/h743bl.ld

build_flags = ${env:h7basic.build_flags}
            -DSTM32H743xx

debug_svd_path = ${PROJECT_DIR}/../common/pio_files/svd/STM32H743.svd

[env:h755basic]
extends = env:h7basic

board = stm32h755
board_build.mcu = stm32h755
board_build.f_cpu = 480000000L
board_build.ldscript = ${PROJECT_DIR}/../common/pio_files/ld/h755bl.ld

build_flags = ${env:h7basic.build_flags}
            -DSTM32H755xx
            -DCORE_CM7

debug_svd_path = ${PROJECT_DIR}/../common/pio_files/svd/STM32H755_CM7.svd